<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAGE Editor Suite</title>
    <link rel="icon" type="image/png" href="Icon.png">
    <link rel="apple-touch-icon" href="Icon.png">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="loading-bar" id="loadingBar"></div>
    <div class="scroll-progress">
        <div class="scroll-progress-bar" id="scrollProgress"></div>
    </div>

    <div class="grid-container">
        <div class="grid-layer dots"></div>
        <div class="grid-layer grid"></div>
        <div class="grid-layer accent"></div>
    </div>

    <div class="glow-container">
        <div class="glow"></div>
        <div class="glow"></div>
        <div class="glow"></div>
    </div>

    <div class="particles" id="particles"></div>

    <nav class="nav-minimal" id="hamburger" aria-label="Open menu" tabindex="0">
        <div class="nav-line"></div>
        <div class="nav-line"></div>
        <div class="nav-line"></div>
    </nav>

    <div class="theme-toggle" id="themeToggle" aria-label="Toggle theme" tabindex="0">
        <svg class="moon-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
        </svg>
        <svg class="sun-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg>
    </div>

    <div class="menu-overlay" id="menuOverlay"></div>

    <div class="nav-menu" id="navMenu" role="navigation" aria-label="Main navigation">
        <h3>AVAILABLE TOOLS</h3>
        <a href="../Loot Matrix/index.html" class="nav-menu-item" role="listitem" tabindex="0"
            aria-label="Open Loot Matrix">
            LOOT MATRIX
            <span class="status active"></span>
        </a>
        <a href="../Ship Config Lite/index.html" class="nav-menu-item" role="listitem" tabindex="0"
            aria-label="Open Ship Configurator">
            SHIP CONFIGURATOR
            <span class="status active"></span>
        </a>
        <a href="../SAGE Map Editor/index.html" class="nav-menu-item" role="listitem" tabindex="0"
            aria-label="Open Map Editor">
            MAP EDITOR
            <span class="status active"></span>
        </a>
        <a href="C4 Tools/index.html#/" class="nav-menu-item" role="listitem" tabindex="0"
            aria-label="Open Claim Stakes">
            CLAIM STAKES
            <span class="status active"></span>
        </a>
        <a href="C4 Tools/index.html#/crafting-hab" class="nav-menu-item" role="listitem" tabindex="0"
            aria-label="Open Crafting Hab">
            CRAFTING HAB
            <span class="status active"></span>
        </a>
        <a href="C4 Tools/index.html#/recipes" class="nav-menu-item" role="listitem" tabindex="0"
            aria-label="Open Crafting Recipes">
            CRAFTING RECIPES
            <span class="status active"></span>
        </a>
        <a href="../Research Nodes/index.html" class="nav-menu-item" role="listitem" tabindex="0"
            aria-label="Open Research Nodes">
            RESEARCH NODES
            <span class="status active"></span>
        </a>
        <a href="../Ship Config Lite/index.html" class="nav-menu-item" role="listitem" tabindex="0"
            aria-label="Open Combat Simulator">
            COMBAT SIMULATOR
            <span class="status active"></span>
        </a>
    </div>

    <header class="main-header">
        <div class="nav-logo" id="navLogo">2625.05.29</div>
    </header>

    <div class="file-list">
        <div class="file-list-header">LOCAL // JSON</div>
        <div class="file-item"><span class="folder-name">map/</span>69regions-v5</div>
        <div class="file-item"><span class="folder-name">map/</span>69regions-v6</div>
        <div class="file-item"><span class="folder-name">reward/</span>all-components</div>
        <div class="file-item"><span class="folder-name">reward/</span>all-rewards</div>
        <div class="file-item"><span class="folder-name">reward/</span>progression-tracks</div>
        <div class="file-item"><span class="folder-name">ship/</span>ship_configurations</div>
        <div class="file-item"><span class="folder-name">reward/</span>all-crafts</div>
    </div>

    <main class="main-content">
        <header class="header">
            <svg class="star-atlas-logo" width="160" height="48" viewBox="0 0 864 160" version="1.1"
                xmlns="http://www.w3.org/2000/svg">
                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <path
                        d="M731.349,103.756 C727.06,103.784 723.585,107.324 723.585,111.68 C723.585,115.94 726.908,119.42 731.067,119.597 L750.84,119.6 L750.84,119.597 C765.079,119.597 776.64,131.319 776.64,145.757 C776.64,160.155 765.144,171.851 750.96,171.917 L711.284,171.92 C710.026,171.92 709.396,171.094 708.96,170.076 L703.2,156.004 C702.661,154.746 703.546,153.68 704.564,153.68 L750.96,153.68 C755.236,153.615 758.689,150.109 758.689,145.757 C758.689,141.405 755.236,137.905 750.96,137.84 L731.4,137.84 C717.161,137.84 705.6,126.118 705.6,111.68 C705.6,97.242 717.161,85.52 731.4,85.52 L772.396,85.52 C773.654,85.52 774.676,86.346 774.24,87.364 L768,101.916 C767.579,102.897 766.694,103.76 765.676,103.76 L731.4,103.756 L731.349,103.756"
                        fill="#FFFFFF"></path>
                    <path
                        d="M455.489,119.6 L433.688,169.041 C432.968,170.626 432.594,171.912 431.009,171.912 L416.609,171.918 C414.544,171.918 413.406,171.351 414.409,169.047 L449.62,88.095 C450.34,86.75 450.787,85.76 452.372,85.76 L458.607,85.76 C460.191,85.76 460.638,86.75 461.358,88.095 L496.57,169.047 C497.572,171.351 496.434,171.918 494.369,171.918 L479.969,171.912 C478.384,171.912 478.01,170.626 477.29,169.041 L455.489,119.6"
                        fill="#FFFFFF"></path>
                    <path
                        d="M563.204,171.92 C562.186,171.92 561.36,171.094 561.36,170.076 L561.36,87.364 C561.36,86.346 562.186,85.52 563.204,85.52 L577.756,85.52 C578.774,85.52 579.6,86.346 579.6,87.364 L579.6,153.68 L616.636,153.68 C617.654,153.68 618.56,154.746 618,156.004 L612,170.076 C611.44,171.334 610.694,171.92 609.436,171.92 L563.204,171.92"
                        fill="#FFFFFF"></path>
                    <path
                        d="M511.44,103.76 L488.324,103.76 C487.306,103.76 486.48,102.934 486.48,101.916 L486.48,87.364 C486.48,86.346 487.306,85.52 488.324,85.52 L552.796,85.52 C553.814,85.52 554.64,86.346 554.64,87.364 L554.64,101.916 C554.64,102.934 553.814,103.76 552.796,103.76 L529.68,103.76 L529.68,170.076 C529.68,171.094 528.854,171.92 527.836,171.92 L513.284,171.92 C512.266,171.92 511.44,171.094 511.44,170.076 L511.44,103.76"
                        fill="#FFFFFF"></path>
                    <path
                        d="M660.378,119.6 L638.577,169.041 C637.857,170.626 637.483,171.912 635.898,171.912 L621.498,171.918 C619.434,171.918 618.295,171.351 619.298,169.047 L654.509,88.095 C655.229,86.75 655.676,85.76 657.261,85.76 L663.496,85.76 C665.081,85.76 665.528,86.75 666.248,88.095 L701.459,169.047 C702.462,171.351 701.323,171.918 699.258,171.918 L684.858,171.912 C683.274,171.912 682.9,170.626 682.18,169.041 L660.378,119.6"
                        fill="#FFFFFF"></path>
                    <path
                        d="M311.684,85.52 L350.4,85.52 C365.368,85.52 377.52,98.048 377.52,113.48 C377.52,125.083 370.65,135.045 360.879,139.273 L380.858,169.047 C381.338,171.351 380.002,171.918 377.938,171.918 L362.818,171.912 C361.233,171.912 360.619,170.386 359.659,169.041 L340.559,141.44 L328.08,141.44 L328.08,170.076 C328.08,171.094 327.254,171.92 326.236,171.92 L311.684,171.92 C310.666,171.92 309.84,171.094 309.84,170.076 L309.84,87.364 C309.84,86.346 310.666,85.52 311.684,85.52 Z M350.4,103.76 L328.08,103.76 L328.08,123.2 L350.4,123.2 L350.4,123.157 C355.581,123.157 359.787,118.821 359.787,113.48 C359.787,108.139 355.581,103.803 350.4,103.803 L350.4,103.76 L350.4,103.76 Z"
                        fill="#FFFFFF"></path>
                    <path
                        d="M262.826,119.6 L241.025,169.041 C240.305,170.626 239.931,171.912 238.346,171.912 L223.946,171.918 C221.881,171.918 220.743,171.351 221.746,169.047 L256.957,88.095 C257.677,86.75 258.124,85.76 259.709,85.76 L265.943,85.76 C267.528,85.76 267.975,86.75 268.695,88.095 L303.907,169.047 C304.909,171.351 303.771,171.918 301.706,171.918 L287.306,171.912 C285.721,171.912 285.347,170.626 284.627,169.041 L262.826,119.6"
                        fill="#FFFFFF"></path>
                    <path
                        d="M186.72,103.76 L160.724,103.76 C159.466,103.76 158.662,102.934 159.283,101.436 L165.36,87.364 C165.66,86.637 166.426,85.52 167.444,85.52 L228.076,85.52 C229.094,85.52 229.92,86.346 229.92,87.364 L229.92,101.916 C229.92,102.934 229.094,103.76 228.076,103.76 L204.96,103.76 L204.96,170.076 C204.96,171.094 204.134,171.92 203.116,171.92 L188.564,171.92 C187.546,171.92 186.72,171.094 186.72,170.076 L186.72,103.76"
                        fill="#FFFFFF"></path>
                    <path
                        d="M114.789,103.756 C110.5,103.784 107.025,107.324 107.025,111.68 C107.025,115.94 110.348,119.42 114.507,119.597 L134.28,119.6 L134.28,119.597 C148.519,119.597 160.08,131.319 160.08,145.757 C160.08,160.155 148.584,171.851 134.4,171.917 L89.204,171.92 C87.946,171.92 87.027,170.854 87.36,170.076 L93.36,155.524 C93.591,154.72 94.426,153.68 95.444,153.68 L134.4,153.68 C138.676,153.615 142.129,150.109 142.129,145.757 C142.129,141.405 138.676,137.905 134.4,137.84 L114.84,137.84 C100.601,137.84 89.04,126.118 89.04,111.68 C89.04,97.242 100.601,85.52 114.84,85.52 L156.796,85.52 C157.814,85.52 158.778,86.227 158.4,87.364 L152.16,101.916 C151.624,103.215 150.854,103.76 149.836,103.76 L114.84,103.756 L114.789,103.756"
                        fill="#FFFFFF"></path>
                    <polyline class="logo-arrow" points="455.52 194.72 441.12 165.92 469.44 165.92 455.52 194.72">
                    </polyline>
                </g>
            </svg>
            <h1 id="mainTitle">SAGE EDITOR SUITE</h1>
            <p class="subtitle">DEVELOPMENT TOOLS FOR STAR ATLAS</p>
        </header>

        <section class="tools-section">
            <div class="section-header">
                <span class="section-number">0001.</span>
                <h2 class="section-title">AVAILABLE TOOLS</h2>
                <div class="section-line"></div>
            </div>

            <div class="tools-grid">
                <div class="tool-card" onclick="window.location.href='../Loot Matrix/index.html'">
                    <pixel-canvas data-gap="8" data-speed="20" data-colors="var(--sa-accent)" data-variant="icon" data-opacity="0.85"></pixel-canvas>
                    <div class="tool-card-header">
                        <span class="tool-card-title" data-number="0001. ">LOOT MATRIX</span>
                        <div class="tool-status active"></div>
                    </div>
                    <div class="tool-card-content">
                        <div class="tool-icon">
                            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                                <rect x="8" y="8" width="8" height="8" />
                                <rect x="48" y="8" width="8" height="8" />
                                <rect x="16" y="16" width="8" height="8" />
                                <rect x="40" y="16" width="8" height="8" />
                                <rect x="24" y="24" width="16" height="16" />
                                <rect x="16" y="40" width="8" height="8" />
                                <rect x="40" y="40" width="8" height="8" />
                                <rect x="8" y="48" width="8" height="8" />
                                <rect x="48" y="48" width="8" height="8" />
                                <rect x="28" y="8" width="8" height="8" />
                                <rect x="28" y="48" width="8" height="8" />
                            </svg>
                        </div>
                        <h3 class="tool-title">LOOT MATRIX</h3>
                        <p class="tool-description">Configure and optimize game reward distributions with mathematical
                            precision for balanced gameplay mechanics.</p>
                        <button class="tool-action">LAUNCH TOOL</button>
                    </div>
                </div>

                <div class="tool-card" onclick="window.location.href='../Ship Config Lite/index.html'">
                    <pixel-canvas data-gap="8" data-speed="20" data-colors="var(--sa-accent)" data-variant="icon" data-opacity="0.85"></pixel-canvas>
                    <div class="tool-card-header">
                        <span class="tool-card-title" data-number="0002. ">SHIP CONFIGURATOR</span>
                        <div class="tool-status active"></div>
                    </div>
                    <div class="tool-card-content">
                        <div class="tool-icon">
                            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                                <rect x="28" y="8" width="8" height="8" />
                                <rect x="20" y="16" width="24" height="8" />
                                <rect x="16" y="24" width="32" height="8" />
                                <rect x="12" y="32" width="8" height="8" />
                                <rect x="44" y="32" width="8" height="8" />
                                <rect x="8" y="40" width="8" height="8" />
                                <rect x="48" y="40" width="8" height="8" />
                                <rect x="20" y="40" width="24" height="8" />
                                <rect x="24" y="48" width="16" height="8" />
                            </svg>
                        </div>
                        <h3 class="tool-title">SHIP CONFIGURATOR</h3>
                        <p class="tool-description">Engineering toolkit for vessel customization, component management,
                            and performance optimization.</p>
                        <button class="tool-action">LAUNCH TOOL</button>
                    </div>
                </div>

                <div class="tool-card" onclick="window.location.href='../SAGE Map Editor/index.html'">
                    <pixel-canvas data-gap="8" data-speed="20" data-colors="var(--sa-accent)" data-variant="icon" data-opacity="0.85"></pixel-canvas>
                    <div class="tool-card-header">
                        <span class="tool-card-title" data-number="0003. ">MAP EDITOR</span>
                        <div class="tool-status active"></div>
                    </div>
                    <div class="tool-card-content">
                        <div class="tool-icon">
                            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                                <rect x="8" y="8" width="16" height="16" />
                                <rect x="28" y="8" width="8" height="8" />
                                <rect x="40" y="8" width="16" height="16" />
                                <rect x="8" y="28" width="8" height="8" />
                                <rect x="20" y="28" width="24" height="8" />
                                <rect x="48" y="28" width="8" height="8" />
                                <rect x="8" y="40" width="16" height="16" />
                                <rect x="28" y="48" width="8" height="8" />
                                <rect x="40" y="40" width="16" height="16" />
                            </svg>
                        </div>
                        <h3 class="tool-title">MAP EDITOR</h3>
                        <p class="tool-description">Advanced cartographic interface for creating and modifying game
                            world territories and navigation systems.</p>
                        <button class="tool-action">LAUNCH TOOL</button>
                    </div>
                </div>


                <div class="tool-card"
                    onclick="window.location.href='C4 Tools/index.html#/'">
                    <pixel-canvas data-gap="8" data-speed="20" data-colors="var(--sa-accent)" data-variant="icon" data-opacity="0.85"></pixel-canvas>
                    <div class="tool-card-header">
                        <span class="tool-card-title" data-number="0004. ">CLAIM STAKES</span>
                        <div class="tool-status active"></div>
                    </div>
                    <div class="tool-card-content">
                        <div class="tool-icon">
                            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                                <rect x="28" y="8" width="8" height="16" />
                                <rect x="20" y="24" width="24" height="8" />
                                <rect x="16" y="32" width="8" height="8" />
                                <rect x="40" y="32" width="8" height="8" />
                                <rect x="12" y="40" width="8" height="8" />
                                <rect x="44" y="40" width="8" height="8" />
                                <rect x="8" y="48" width="48" height="8" />
                            </svg>
                        </div>
                        <h3 class="tool-title">CLAIM STAKES</h3>
                        <p class="tool-description">Strategic resource extraction and planetary claim management for
                            optimal mining operations.</p>
                        <button class="tool-action">LAUNCH TOOL</button>
                    </div>
                </div>


                <div class="tool-card"
                    onclick="window.location.href='C4 Tools/index.html#/crafting-hab'">
                    <pixel-canvas data-gap="8" data-speed="20" data-colors="var(--sa-accent)" data-variant="icon" data-opacity="0.85"></pixel-canvas>

                    <div class="tool-card-header">
                        <span class="tool-card-title" data-number="0005. ">CRAFTING HAB</span>
                        <div class="tool-status active"></div>
                    </div>
                    <div class="tool-card-content">
                        <div class="tool-icon">
                            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                                <rect x="24" y="8" width="16" height="8" />
                                <rect x="16" y="16" width="8" height="8" />
                                <rect x="40" y="16" width="8" height="8" />
                                <rect x="28" y="24" width="8" height="16" />
                                <rect x="12" y="32" width="12" height="8" />
                                <rect x="40" y="32" width="12" height="8" />
                                <rect x="20" y="40" width="24" height="8" />
                                <rect x="24" y="48" width="16" height="8" />
                            </svg>
                        </div>
                        <h3 class="tool-title">CRAFTING HAB</h3>
                        <p class="tool-description">Starbase manufacturing operations management with advanced crafting
                            queue optimization.</p>
                        <button class="tool-action">LAUNCH TOOL</button>
                    </div>
                </div>


                <div class="tool-card"
                    onclick="window.location.href='C4 Tools/index.html#/recipes'">
                    <pixel-canvas data-gap="8" data-speed="20" data-colors="var(--sa-accent)" data-variant="icon" data-opacity="0.85"></pixel-canvas>

                    <div class="tool-card-header">
                        <span class="tool-card-title" data-number="0006. ">CRAFTING RECIPES</span>
                        <div class="tool-status active"></div>
                    </div>
                    <div class="tool-card-content">
                        <div class="tool-icon">
                            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                                <rect x="16" y="8" width="8" height="8" />
                                <rect x="28" y="8" width="8" height="8" />
                                <rect x="40" y="8" width="8" height="8" />
                                <rect x="24" y="16" width="16" height="8" />
                                <rect x="20" y="24" width="24" height="16" />
                                <rect x="16" y="40" width="8" height="8" />
                                <rect x="28" y="40" width="8" height="8" />
                                <rect x="40" y="40" width="8" height="8" />
                                <rect x="24" y="48" width="16" height="8" />
                            </svg>
                        </div>
                        <h3 class="tool-title">CRAFTING RECIPES</h3>
                        <p class="tool-description">Manufacturing blueprint visualization with resource requirement
                            analysis and efficiency metrics.</p>
                        <button class="tool-action">LAUNCH TOOL</button>
                    </div>
                </div>

                <div class="tool-card" onclick="window.location.href='../Research Nodes/index.html'">
                    <pixel-canvas data-gap="8" data-speed="20" data-colors="var(--sa-accent)" data-variant="icon" data-opacity="0.85"></pixel-canvas>
                    <div class="tool-card-header">
                        <span class="tool-card-title" data-number="0007. ">RESEARCH NODES</span>
                        <div class="tool-status active"></div>
                    </div>
                    <div class="tool-card-content">
                        <div class="tool-icon">
                            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                                <rect x="28" y="8" width="8" height="8" />
                                <rect x="16" y="16" width="8" height="8" />
                                <rect x="40" y="16" width="8" height="8" />
                                <rect x="24" y="24" width="16" height="8" />
                                <rect x="8" y="32" width="8" height="8" />
                                <rect x="48" y="32" width="8" height="8" />
                                <rect x="16" y="40" width="32" height="8" />
                                <rect x="28" y="48" width="8" height="8" />
                            </svg>
                        </div>
                        <h3 class="tool-title">RESEARCH NODES</h3>
                        <p class="tool-description">Council Rank progression system for career advancement paths and
                            skill tree visualization.</p>
                        <button class="tool-action">LAUNCH TOOL</button>
                    </div>
                </div>

                <div class="tool-card" onclick="window.location.href='../Ship Config Lite/index.html'">
                    <pixel-canvas data-gap="8" data-speed="20" data-colors="var(--sa-accent)" data-variant="icon" data-opacity="0.85"></pixel-canvas>
                    <div class="tool-card-header">
                        <span class="tool-card-title" data-number="0008. ">COMBAT SIMULATOR</span>
                        <div class="tool-status active"></div>
                    </div>
                    <div class="tool-card-content">
                        <div class="tool-icon">
                            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                                <rect x="8" y="20" width="8" height="24" />
                                <rect x="16" y="16" width="8" height="8" />
                                <rect x="16" y="40" width="8" height="8" />
                                <rect x="24" y="28" width="16" height="8" />
                                <rect x="40" y="16" width="8" height="8" />
                                <rect x="40" y="40" width="8" height="8" />
                                <rect x="48" y="20" width="8" height="24" />
                            </svg>
                        </div>
                        <h3 class="tool-title">COMBAT SIMULATOR</h3>
                        <p class="tool-description">Fleet battle simulator with RNG mechanics and formula-based combat
                            resolution. Integrated within Ship Configurator.</p>
                        <button class="tool-action">LAUNCH TOOL</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div class="bottom-info">
        <div class="decorative-text">SYSTEM /// ONLINE</div>
        <div class="keyboard-hint">Press <kbd>ESC</kbd> to close menu • <kbd>T</kbd> to toggle theme • <kbd>0-9</kbd>
            for colors</div>
        <div class="timestamp" id="timestamp">
            <div class="timestamp-time">--:--:--</div>
            <div class="timestamp-date">----</div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>TOOLS</h3>
                <a href="../Loot Matrix/index.html" class="footer-link">Loot Matrix</a>
                <a href="../SAGE Map Editor/index.html" class="footer-link">Map Editor</a>
                <a href="../Ship Config Lite/index.html" class="footer-link">Ship Configurator</a>
                <a href="C4 Tools/index.html#/" class="footer-link">Claim
                    Stakes</a>
                <a href="C4 Tools/index.html#/crafting-hab" class="footer-link">Crafting Hab</a>
                <a href="C4 Tools/index.html#/recipes" class="footer-link">Crafting
                    Recipes</a>
                <a href="../Research Nodes/index.html" class="footer-link">Research Nodes</a>
            </div>
            <div class="footer-section">
                <h3>ECOSYSTEM</h3>
                <a href="https://discord.gg/staratlas" class="footer-link">Discord</a>
                <a href="https://play.staratlas.com/" class="footer-link">Play Star Atlas</a>
                <a href="https://govern.staratlas.com/" class="footer-link">Star Atlas DAO</a>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    
    <script>
        // Pixel Effect Implementation for Tool Cards
        class Pixel {
            constructor(canvas, context, x, y, color, speed, delay, distanceRatio, pixelSize = 3, textFadeFactor = 1) {
                this.width = canvas.width
                this.height = canvas.height
                this.ctx = context
                this.x = x
                this.y = y
                this.color = color
                this.speed = this.getRandomValue(0.1, 0.9) * speed
                this.size = 0
                this.sizeStep = Math.random() * 0.4
                this.minSize = 0.5
                
                // Apply vignetting - smaller max size near edges
                const vignetteScale = 1 - Math.pow(distanceRatio, 2) * 0.6 // Quadratic falloff
                this.maxSizeInteger = pixelSize * vignetteScale  // Use custom pixel size
                this.maxSize = this.getRandomValue(this.minSize, Math.max(this.minSize, this.maxSizeInteger))
                
                this.delay = delay
                this.counter = 0
                this.counterStep = Math.random() * 2 + 3  // Reduced randomness for more uniform reveal
                this.isIdle = false
                this.isReverse = false
                this.isShimmer = false
                this.distanceRatio = distanceRatio
                this.textFadeFactor = textFadeFactor  // Factor for text area fading
            }

            getRandomValue(min, max) {
                return Math.random() * (max - min) + min
            }

            draw() {
                const centerOffset = this.maxSizeInteger * 0.5 - this.size * 0.5
                
                // Apply vignetting to opacity
                this.ctx.save()
                const vignetteOpacity = 1 - Math.pow(this.distanceRatio, 1.5) * 0.7
                // Combine vignette with text fade factor
                this.ctx.globalAlpha = this.ctx.globalAlpha * vignetteOpacity * this.textFadeFactor
                
                this.ctx.fillStyle = this.color
                this.ctx.fillRect(
                    this.x + centerOffset,
                    this.y + centerOffset,
                    this.size,
                    this.size
                )
                
                this.ctx.restore()
            }

            appear() {
                this.isIdle = false

                if (this.counter <= this.delay) {
                    this.counter += this.counterStep
                    return
                }

                if (this.size >= this.maxSize) {
                    this.isShimmer = true
                }

                if (this.isShimmer) {
                    this.shimmer()
                } else {
                    this.size += this.sizeStep
                }

                this.draw()
            }

            disappear() {
                this.isShimmer = false
                this.counter = 0

                if (this.size <= 0) {
                    this.isIdle = true
                    return
                } else {
                    this.size -= 0.1
                }

                this.draw()
            }

            shimmer() {
                if (this.size >= this.maxSize) {
                    this.isReverse = true
                } else if (this.size <= this.minSize) {
                    this.isReverse = false
                }

                if (this.isReverse) {
                    this.size -= this.speed
                } else {
                    this.size += this.speed
                }
            }
        }

        // Define the pixel canvas web component
        class PixelCanvasElement extends HTMLElement {
            constructor() {
                super()
                this.canvas = document.createElement("canvas")
                this.ctx = this.canvas.getContext("2d")
                this.pixels = []
                this.animation = null
                this.timeInterval = 1000 / 60
                this.timePrevious = performance.now()
                this.reducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches
                this._initialized = false
                this._resizeObserver = null
                this._parent = null

                const shadow = this.attachShadow({ mode: "open" })
                const style = document.createElement("style")
                style.textContent = `
                    :host {
                        display: grid;
                        inline-size: 100%;
                        block-size: 100%;
                        overflow: hidden;
                        position: absolute;
                        top: 0;
                        left: 0;
                        pointer-events: none;
                        z-index: 1;
                    }
                `
                shadow.appendChild(style)
                shadow.appendChild(this.canvas)
            }

            get colors() {
                // Get the computed style to resolve CSS variables
                const computedColor = getComputedStyle(document.documentElement).getPropertyValue('--sa-accent').trim()
                return [computedColor, computedColor + 'dd', computedColor + '99']
            }

            get gap() {
                const value = Number(this.dataset.gap) || 5
                return Math.max(4, Math.min(50, value))
            }

            get speed() {
                const value = Number(this.dataset.speed) || 35
                return this.reducedMotion ? 0 : Math.max(0, Math.min(100, value)) * 0.001
            }

            get variant() {
                return this.dataset.variant || "default"
            }

            get opacity() {
                const value = Number(this.dataset.opacity)
                return isNaN(value) ? 1 : Math.max(0, Math.min(1, value))
            }

            get blend() {
                return this.dataset.blend || "normal"
            }

            get pixelSize() {
                const value = Number(this.dataset.size)
                return isNaN(value) ? 3 : Math.max(1, Math.min(10, value))
            }

            connectedCallback() {
                if (this._initialized) return
                this._initialized = true
                this._parent = this.parentElement

                requestAnimationFrame(() => {
                    this.handleResize()

                    const ro = new ResizeObserver((entries) => {
                        if (!entries.length) return
                        requestAnimationFrame(() => this.handleResize())
                    })
                    ro.observe(this)
                    this._resizeObserver = ro
                })

                this._parent?.addEventListener("mouseenter", () => this.handleAnimation("appear"))
                this._parent?.addEventListener("mouseleave", () => this.handleAnimation("disappear"))
                
                // Listen for theme changes
                const observer = new MutationObserver(() => {
                    this.createPixels() // Recreate pixels with new color
                })
                observer.observe(document.documentElement, { 
                    attributes: true, 
                    attributeFilter: ['data-accent', 'data-theme'] 
                })
                this._themeObserver = observer
            }

            disconnectedCallback() {
                this._initialized = false
                this._resizeObserver?.disconnect()
                this._themeObserver?.disconnect()

                if (this.animation) {
                    cancelAnimationFrame(this.animation)
                    this.animation = null
                }

                this._parent = null
            }

            handleResize() {
                if (!this.ctx || !this._initialized) return

                const rect = this.getBoundingClientRect()
                if (rect.width === 0 || rect.height === 0) return

                const width = Math.floor(rect.width)
                const height = Math.floor(rect.height)

                const dpr = window.devicePixelRatio || 1
                this.canvas.width = width * dpr
                this.canvas.height = height * dpr
                this.canvas.style.width = `${width}px`
                this.canvas.style.height = `${height}px`

                this.ctx.setTransform(1, 0, 0, 1, 0, 0)
                this.ctx.scale(dpr, dpr)

                this.createPixels()
            }

            getDistanceToCenter(x, y) {
                // Use CSS dimensions for proper center calculation
                const rect = this.getBoundingClientRect()
                const centerX = rect.width / 2
                const centerY = rect.height / 2
                const dx = x - centerX
                const dy = y - centerY
                return Math.sqrt(dx * dx + dy * dy)
            }

            createPixels() {
                if (!this.ctx) return
                this.pixels = []

                // Get actual element dimensions for proper center calculation
                const rect = this.getBoundingClientRect()
                const width = rect.width
                const height = rect.height

                // Calculate max distance for normalization
                const maxDistance = Math.sqrt(
                    Math.pow(width / 2, 2) + 
                    Math.pow(height / 2, 2)
                )

                // Define text area (approximate location of title text)
                const textAreaTop = height * 0.4  // Roughly where title starts
                const textAreaBottom = height * 0.65  // Roughly where title ends
                const textAreaLeft = width * 0.1
                const textAreaRight = width * 0.9

                // Create pixels based on CSS dimensions, not canvas dimensions
                for (let x = 0; x < width; x += this.gap) {
                    for (let y = 0; y < height; y += this.gap) {
                        // Calculate distance to text area center for gradual fade
                        const textCenterX = width * 0.14  // Text is left-aligned, aligned with icon and title
                        const textCenterY = height * 0.38  // Text appears higher up in the card, moved up by 15%
                        const distanceToText = Math.sqrt(
                            Math.pow(x - textCenterX, 2) + 
                            Math.pow(y - textCenterY, 2)
                        )
                        
                        // Define fade zone around text (larger = more gradual fade)
                        const fadeRadius = Math.min(width, height) * 0.45  // Much larger fade area
                        const textExclusionRadius = Math.min(width, height) * 0.12  // Smaller exclusion area for more gradual fade
                        
                        // Skip pixels too close to text center
                        if (distanceToText < textExclusionRadius) {
                            continue;
                        }
                        
                        const color = this.colors[Math.floor(Math.random() * this.colors.length)]
                        // Enhanced delay calculation for clearer radial effect
                        let delay = 0
                        const distance = this.getDistanceToCenter(x, y)
                        const distanceRatio = distance / maxDistance
                        
                        if (!this.reducedMotion && this.variant === 'icon') {
                            // Normalize and scale the delay for more visible radial pattern
                            delay = distanceRatio * 200  // Increased from 150 to slow down
                        }

                        // Calculate text fade factor for gradual opacity reduction
                        let textFadeFactor = 1
                        if (distanceToText < fadeRadius) {
                            textFadeFactor = (distanceToText - textExclusionRadius) / (fadeRadius - textExclusionRadius)
                            textFadeFactor = Math.max(0, Math.min(1, textFadeFactor))
                        }

                        this.pixels.push(
                            new Pixel(this.canvas, this.ctx, x, y, color, this.speed, delay, distanceRatio, this.pixelSize, textFadeFactor)
                        )
                    }
                }
            }

            handleAnimation(name) {
                if (this.animation) {
                    cancelAnimationFrame(this.animation)
                }

                const animate = () => {
                    this.animation = requestAnimationFrame(animate)

                    const timeNow = performance.now()
                    const timePassed = timeNow - this.timePrevious

                    if (timePassed < this.timeInterval) return

                    this.timePrevious = timeNow - (timePassed % this.timeInterval)

                    if (!this.ctx) return
                    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)
                    
                    // Apply global opacity for dimmer effect
                    this.ctx.save()
                    this.ctx.globalAlpha = this.opacity
                    
                    // Apply blend mode if specified
                    if (this.blend === 'additive') {
                        this.ctx.globalCompositeOperation = 'overlay'
                    }

                    let allIdle = true
                    for (const pixel of this.pixels) {
                        pixel[name]()
                        if (!pixel.isIdle) allIdle = false
                    }
                    
                    this.ctx.restore()

                    if (allIdle) {
                        cancelAnimationFrame(this.animation)
                        this.animation = null
                    }
                }

                animate()
            }
        }

        // Register the web component
        if (!customElements.get("pixel-canvas")) {
            customElements.define("pixel-canvas", PixelCanvasElement)
        }
    </script>
</body>

</html>